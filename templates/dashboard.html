{% extends 'base.html' %}

{% block title %}Dashboard - Saintly Scheduler{% endblock %}

{% block content %}
<div class="container my-4">
    <h1 class="text-center">Welcome, {{ current_user.username }}!</h1>
    <p class="text-center">Stay on top of your tasks with your personalized dashboard.</p>

    <!-- Dashboard Grid -->
    <div class="d-flex flex-wrap justify-content-around">

        <!-- Important Tasks Section -->
        <div class="card border-danger mb-4" style="width: 45%; min-width: 300px;">
            <div class="card-header bg-danger text-white">
                <h4>Important Tasks</h4>
            </div>
            <div class="card-body">
                {% if important_tasks %}
                    <ul class="list-group">
                        {% for task in important_tasks %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="{{ url_for('task_detail', task_id=task.id) }}">{{ task.title }}</a>
                                <span class="badge bg-danger">Important</span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No important tasks. Stay ahead by marking some tasks as important!</p>
                {% endif %}
            </div>
        </div>

        <!-- Tasks Due Today Section -->
        <div class="card border-primary mb-4" style="width: 45%; min-width: 300px;">
            <div class="card-header bg-primary text-white">
                <h4>Tasks Due Today</h4>
            </div>
            <div class="card-body">
                {% if tasks_due_today %}
                    <ul class="list-group">
                        {% for task in tasks_due_today %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="{{ url_for('task_detail', task_id=task.id) }}">{{ task.title }}</a>
                                <span class="badge bg-primary">Today</span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No tasks due today. You're all caught up!</p>
                {% endif %}
            </div>
        </div>

        <!-- Upcoming Tasks Section -->
        <div class="card border-warning mb-4" style="width: 45%; min-width: 300px;">
            <div class="card-header bg-warning text-dark">
                <h4>Upcoming Tasks</h4>
            </div>
            <div class="card-body">
                {% if upcoming_tasks %}
                    <ul class="list-group">
                        {% for task in upcoming_tasks %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="{{ url_for('task_detail', task_id=task.id) }}">{{ task.title }}</a>
                                <span class="badge bg-warning text-dark">In {{ task.days_until_due }} days</span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No upcoming tasks. Great job staying ahead!</p>
                {% endif %}
            </div>
        </div>

        <!-- Completed Tasks Section -->
        <div class="card border-success mb-4" style="width: 45%; min-width: 300px;">
            <div class="card-header bg-success text-white">
                <h4>Completed Tasks</h4>
            </div>
            <div class="card-body">
                {% if completed_tasks %}
                    <ul class="list-group">
                        {% for task in completed_tasks %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                {{ task.title }}
                                <span class="badge bg-success">Completed</span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No completed tasks yet. Start checking them off!</p>
                {% endif %}
            </div>
        </div>

    </div>
</div>
{% endblock %}
