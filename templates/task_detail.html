{% extends 'base.html' %}

{% block title %}Task Details - Saintly Scheduler{% endblock %}

{% block content %}
<div class="container my-4">


    <!-- Set category class based on task's category -->
    {% if task.category == 'Study' %}
        {% set category_class = 'bg-study' %}
    {% elif task.category == 'Exam' %}
        {% set category_class = 'bg-exam' %}
    {% elif task.category == 'Sport' %}
        {% set category_class = 'bg-sport' %}
    {% elif task.category == 'Social' %}
        {% set category_class = 'bg-social' %}
    {% else %}
        {% set category_class = 'bg-other' %}
    {% endif %}

    <div class="card border-info" style="width: 45%; min-width: 300px; margin: auto;">
        <div class="card-header {{ category_class }} text-white">
            <h4>Task Details</h4>
        </div>
        <div class="card-body">
            <h5 class="card-title">{{ task.title }}</h5>
            <p class="card-text"><strong>Category:</strong> {{ task.category }}</p>
            <p class="card-text"><strong>Description:</strong> {{ task.description }}</p>
            <p class="card-text">
                <strong>Due Date:</strong>
                {% if task.due_date %}
                    {{ task.due_date.strftime('%Y-%m-%d') }}
                {% else %}
                    No due date
                {% endif %}
            </p>
            <p class="card-text"><strong>Important:</strong> {% if task.important %}Yes{% else %}No{% endif %}</p>
            <p class="card-text">
                <strong>Status:</strong>
                {% if task.is_complete %}
                    <span class="badge bg-success">Completed</span>
                {% else %}
                    <span class="badge bg-warning text-dark">Pending</span>
                {% endif %}
            </p>
            <p class="card-text"><strong>Created On:</strong> {{ task.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>

            <!-- Edit and Delete Actions -->
            <div class="d-flex justify-content-between mt-4">
                <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn btn-primary">Edit Task</a>
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this task?')">Delete Task</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
